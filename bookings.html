<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Booked Customers</title>

  <style>
    body { margin:0; font-family:Manrope; background:#f5f5f5; }
    header { background:#2e7d32; padding:16px; color:white; font-size:22px; }
    table { width:100%; border-collapse:collapse; margin-top:20px; }
    th, td { padding:12px; border-bottom:1px solid #ddd; }
    th { background:#c8e6c9; }
  </style>
</head>

<body>

<header>ðŸ“˜ Booked Customers</header>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Phone</th>
      <th>Project</th>
    </tr>
  </thead>
  <tbody id="body"></tbody>
</table>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
  import { getFirestore, collection, onSnapshot } 
    from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

  if (!localStorage.getItem("isAdmin")) {
    window.location.href = "login.html";
  }

  const app = initializeApp({
    apiKey: "AIzaSyC3toF-kGYcZBJ8EchutXkWZ7kIEHBldH8",
    authDomain: "mkriti-websitei.firebaseapp.com",
    projectId: "mkriti-websitei"
  });

  const db = getFirestore(app);
  const body = document.getElementById("body");

  onSnapshot(collection(db, "booked_customer"), (snap) => {
    body.innerHTML = "";
    snap.forEach(doc => {
      const d = doc.data();
      body.innerHTML += `
        <tr>
          <td>${d.name}</td>
          <td>${d.phone_number}</td>
          <td>${d.project}</td>
        </tr>
      `;
    });
  });
</script>

</body>
</html>
